"use strict";(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[954],{1954:(ce,x,h)=>{h.r(x),h.d(x,{CalendarModule:()=>re});var g=h(9808),D=h(6696),e=h(5e3),E=h(7154),q=h(5604),J=h(2729),p=h(8966),k=h(5113),T=h(4594),C=h(7322),Z=h(4107),f=h(3075),y=h(508),_=h(7423),M=h(7238),S=h(5245),b=h(4834),A=h(9224),w=h(4623);function Y(n,d){if(1&n&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&n){const t=d.$implicit;e.Q6J("value",null==t?null:t.key),e.xp6(1),e.Oqu(null==t?null:t.name)}}function I(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"mat-form-field"),e.TgZ(2,"mat-select",11),e.NdJ("ngModelChange",function(l){return e.CHM(t),e.oxw().monthSelectValue=l})("selectionChange",function(){e.CHM(t);const l=e.oxw();return l.onChangeSelectedCalendar(l.calendarMode,l.monthSelectValue)}),e.YNc(3,Y,2,2,"mat-option",12),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.monthSelectValue),e.xp6(1),e.Q6J("ngForOf",t.commonDateTimeValue.month)}}function U(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().onChangeSelectedCalendar("before")}),e.TgZ(1,"mat-icon"),e._uU(2,"navigate_before"),e.qZA(),e.qZA()}2&n&&e.Q6J("matTooltip","th\xe1ng tr\u01b0\u1edbc")}function H(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().onChangeSelectedCalendar("next")}),e.TgZ(1,"mat-icon"),e._uU(2,"navigate_next"),e.qZA(),e.qZA()}2&n&&e.Q6J("matTooltip","th\xe1ng sau")}function N(n,d){if(1&n&&(e.TgZ(0,"span",15),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ","day"===t.calendarMode||"month"===t.calendarMode?"th\xe1ng "+((null==t.selectedDate||null==t.selectedDate.solar?null:t.selectedDate.solar.getMonth())+1):""," ",null==t.selectedDate||null==t.selectedDate.solar?null:t.selectedDate.solar.getFullYear(),"")}}function O(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"mat-list-item",27),e.NdJ("click",function(){const r=e.CHM(t).$implicit,o=e.oxw().$implicit,i=e.oxw(2),s=e.MAs(14);return i.openEventSummaryDialog(o,r,s)}),e._uU(1),e.qZA()}if(2&n){const t=d.$implicit;e.Q6J("ngClass","yearly-monthly-daily"===t.event.date?"yearly-monthly-daily":"yearly-monthly-daily"!==t.event.date&&t.event.date.includes("yearly-monthly-")?"yearly-monthly-special":"yearly-monthly-daily"!==t.event.date&&!t.event.date.includes("yearly-monthly-")&&t.event.date.includes("yearly-")?"yearly-special-special":""),e.xp6(1),e.hij(" ",t.event.name," ")}}const P=function(n,d){return{height:n,maxHeight:d}};function Q(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"mat-card",21),e.TgZ(1,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).onChangeCalendarMode("day",r)}),e.TgZ(2,"div",23),e._uU(3),e.qZA(),e.TgZ(4,"div",24),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",25),e.TgZ(7,"mat-list"),e.YNc(8,O,2,2,"mat-list-item",26),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=d.$implicit,a=e.oxw(2);e.Q6J("ngStyle",e.WLB(6,P,a.selectedMonth.length%6==0?"calc(100%/6)":"calc(100%/5)",a.selectedMonth.length%6==0?"calc(100%/6)":"calc(100%/5)")),e.xp6(1),e.Q6J("ngClass",a.getCurrentDate(t)?"current-date":""),e.xp6(2),e.Oqu(null==t||null==t.solar?null:t.solar.getDate()),e.xp6(2),e.AsE(" ",null==t||null==t.lunar||null==t.lunar.convertSolar2Lunar?null:t.lunar.convertSolar2Lunar.lunarDay,"/",null==t||null==t.lunar||null==t.lunar.convertSolar2Lunar?null:t.lunar.convertSolar2Lunar.lunarMonth," "),e.xp6(3),e.Q6J("ngForOf",t.event)}}function z(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("touchstart",function(l){return e.CHM(t),e.oxw().swipe(l,"start")})("touchend",function(l){return e.CHM(t),e.oxw().swipe(l,"end")}),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e._uU(3,"T2"),e.qZA(),e.TgZ(4,"div",18),e._uU(5,"T3"),e.qZA(),e.TgZ(6,"div",18),e._uU(7,"T4"),e.qZA(),e.TgZ(8,"div",18),e._uU(9,"T5"),e.qZA(),e.TgZ(10,"div",18),e._uU(11,"T6"),e.qZA(),e.TgZ(12,"div",18),e._uU(13,"T7"),e.qZA(),e.TgZ(14,"div",18),e._uU(15,"CN"),e.qZA(),e.qZA(),e.TgZ(16,"div",19),e.YNc(17,Q,9,9,"mat-card",20),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(17),e.Q6J("ngForOf",t.selectedMonth)}}function R(n,d){if(1&n&&(e.TgZ(0,"div",44),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",t.hour<10?"0"+t.hour:t.hour,":",t.munite<10?"0"+t.munite:t.munite," ")}}function $(n,d){1&n&&e._UZ(0,"mat-divider",45)}function V(n,d){if(1&n&&(e.TgZ(0,"div",41),e.ALo(1,"number"),e.ALo(2,"number"),e.ALo(3,"number"),e.ALo(4,"number"),e.YNc(5,R,2,2,"div",42),e.YNc(6,$,1,0,"mat-divider",43),e.qZA()),2&n){const t=d.$implicit,a=e.oxw(2);e.Q6J("id","h"+e.xi3(1,4,t.hour,"2.0")+"m"+e.xi3(2,7,t.munite,"2.0"))("matTooltip","desktop"===a.viewPortMode?e.xi3(3,10,t.hour,"2.0")+":"+e.xi3(4,13,t.munite,"2.0"):""),e.xp6(5),e.Q6J("ngIf",0===t.munite||23!==t.hour&&0===t.munite),e.xp6(1),e.Q6J("ngIf",0===t.munite||23!==t.hour&&0===t.munite)}}const B=function(n,d){return{height:n,top:d}};function j(n,d){if(1&n&&e._UZ(0,"div",46),2&n){const t=d.$implicit;e.Q6J("ngStyle",e.WLB(1,B,(null==t?null:t.height)+"px",(null==t?null:t.position)+"px"))}}function K(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",49),e.NdJ("click",function(){const r=e.CHM(t).$implicit,o=e.oxw(3),i=e.MAs(14);return o.openEventSummaryDialog(o.selectedDate,r,i)}),e._uU(1),e.qZA()}if(2&n){const t=d.$implicit;e.Q6J("ngClass","yearly-monthly-daily"===t.event.date?"yearly-monthly-daily":"yearly-monthly-daily"!==t.event.date&&t.event.date.includes("yearly-monthly-")?"yearly-monthly-special":"yearly-monthly-daily"!==t.event.date&&!t.event.date.includes("yearly-monthly-")&&t.event.date.includes("yearly-")?"yearly-special-special":""),e.xp6(1),e.hij(" ",t.event.name," ")}}const L=function(n){return{top:n}};function W(n,d){if(1&n&&(e.TgZ(0,"div",47),e.YNc(1,K,2,2,"div",48),e.qZA()),2&n){const t=d.$implicit,a=e.oxw(2);e.Q6J("ngStyle",e.VKq(2,L,a.getPosition(t.timeZone.start)+"px")),e.xp6(1),e.Q6J("ngForOf",t.event)}}function G(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",28),e.NdJ("touchstart",function(l){return e.CHM(t),e.oxw().swipe(l,"start")})("touchend",function(l){return e.CHM(t),e.oxw().swipe(l,"end")}),e.TgZ(1,"div",29),e.TgZ(2,"div",30),e.TgZ(3,"div",31),e.TgZ(4,"div",32),e._uU(5),e.qZA(),e.TgZ(6,"div",33),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"mat-divider"),e.qZA(),e.TgZ(9,"div",34),e.YNc(10,V,7,16,"div",35),e.TgZ(11,"div",36),e.ALo(12,"async"),e.ALo(13,"async"),e.TgZ(14,"div",37),e._uU(15),e.ALo(16,"date"),e.ALo(17,"async"),e.qZA(),e._UZ(18,"div",38),e.qZA(),e.YNc(19,j,1,4,"div",39),e.YNc(20,W,2,4,"div",40),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.hij(" ",null==t.selectedDate||null==t.selectedDate.solar?null:t.selectedDate.solar.getDate()," "),e.xp6(2),e.AsE(" ",null==t.selectedDate||null==t.selectedDate.lunar?null:t.selectedDate.lunar.convertSolar2Lunar.lunarDay,"/",null==t.selectedDate||null==t.selectedDate.lunar?null:t.selectedDate.lunar.convertSolar2Lunar.lunarMonth," "),e.xp6(3),e.Q6J("ngForOf",t.dateRange),e.xp6(1),e.Q6J("ngStyle",e.VKq(17,L,t.getPosition(e.lcZ(12,8,t.time.time))?t.getPosition(e.lcZ(13,10,t.time.time))+"px":"")),e.xp6(4),e.Oqu(e.xi3(16,12,e.lcZ(17,15,t.time.time),"HH:mm:ss")),e.xp6(4),e.Q6J("ngForOf",t.tuThoiZone),e.xp6(1),e.Q6J("ngForOf",t.dateEvents)}}function X(n,d){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=d.$implicit;e.xp6(1),e.Oqu(null==t?null:t.name)}}function ee(n,d){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=d.$implicit;e.xp6(1),e.Oqu(null==t?null:t.name)}}function te(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",50),e.TgZ(1,"h2",51),e._uU(2),e.qZA(),e.TgZ(3,"div",52),e.TgZ(4,"mat-icon"),e._uU(5,"event"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",52),e.TgZ(8,"mat-icon"),e._uU(9,"schedule"),e.qZA(),e.YNc(10,X,2,1,"span",53),e.qZA(),e.TgZ(11,"div",52),e.TgZ(12,"mat-icon"),e._uU(13,"location_pin"),e.qZA(),e.YNc(14,ee,2,1,"span",53),e.qZA(),e.TgZ(15,"mat-dialog-actions"),e.TgZ(16,"button",54),e._uU(17,"\u0110\xf3ng"),e.qZA(),e.TgZ(18,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().onGetKinhFromSummaryEvent()}),e._uU(19," Xem kinh "),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.name),e.xp6(4),e.hij(" ","yearly-monthly-daily"===(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date)?"M\u1ed7i ng\xe0y":"yearly-monthly-daily"!==(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date)&&null!=t.shownDate&&null!=t.shownDate.event&&null!=t.shownDate.event.event&&t.shownDate.event.event.date.includes("yearly-monthly-")?"Ng\xe0y "+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[2])+" m\u1ed7i th\xe1ng":"yearly-monthly-daily"===(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date)||null!=t.shownDate&&null!=t.shownDate.event&&null!=t.shownDate.event.event&&t.shownDate.event.event.date.includes("yearly-monthly-")||null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event||!t.shownDate.event.event.date.includes("yearly-")?"yearly-monthly-daily"===(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date)||null!=t.shownDate&&null!=t.shownDate.event&&null!=t.shownDate.event.event&&t.shownDate.event.event.date.includes("yearly-monthly-")||null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event||!t.shownDate.event.event.date.includes("yearly-")?"":"Ng\xe0y "+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[2])+" th\xe1ng "+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[1])+" n\u0103m"+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[0]):"Ng\xe0y "+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[2])+" th\xe1ng "+(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.date.split("-")[1])+" m\u1ed7i n\u0103m"," "),e.xp6(4),e.Q6J("ngForOf",t.getTimes(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.time)),e.xp6(4),e.Q6J("ngForOf",t.getLocationTypes(null==t.shownDate||null==t.shownDate.event||null==t.shownDate.event.event?null:t.shownDate.event.event.locationType)),e.xp6(4),e.Q6J("color","primary")("mat-dialog-close",!0)}}let ne=(()=>{class n{constructor(t,a,l,r,o,i,s,u){var v;this.calendarService=t,this.commonService=a,this.eventService=l,this.matDialog=r,this.router=o,this.route=i,this.breakpointObserver=s,this.changeDetector=u,this.selectedDate=new ae,this.selectedMonth=[],this.currentDate={solar:new Date},this.dateRange=[],this.eventList=this.eventService.eventList,this.calendarMode="month",this.viewPortMode="desktop",this.commonDateTimeValue=this.commonService.commonDates,this.monthSelectValue=null===(v=this.selectedDate.solar)||void 0===v?void 0:v.getMonth(),this.time=this.commonService.time,this.tuThoiZone=[],this.dateEvents=[]}ngOnInit(){this.breakpointObserver.observe(["(max-width: 600px)"]).subscribe(t=>{this.viewPortMode=t.matches?"mobile":"desktop"}),this.route.queryParams.subscribe(t=>{var a,l,r,o,i;this.calendarMode=t.m?t.m:"month",t.s?(this.selectedDate.solar=new Date(t.s),new Date(t.s)||(this.selectedDate.solar=new Date),this.selectedDate.lunar=this.calendarService.getConvertedFullDate(this.selectedDate.solar)):(this.selectedDate.solar=new Date,this.selectedDate.lunar=this.calendarService.getConvertedFullDate(this.selectedDate.solar)),this.calendarService.calendarViewMode=this.calendarMode,this.onChangeCalendarMode(this.calendarMode,this.selectedDate),this.getCalendarEvent(),(new Date).getHours()>22&&(null===(a=this.currentDate)||void 0===a||a.solar.setDate((null===(l=this.currentDate)||void 0===l?void 0:l.solar.getDate())+1)),this.monthSelectValue=(null===(r=this.selectedDate.solar)||void 0===r?void 0:r.getMonth())+1<10?"0"+((null===(o=this.selectedDate.solar)||void 0===o?void 0:o.getMonth())+1):((null===(i=this.selectedDate.solar)||void 0===i?void 0:i.getMonth())+1).toString()})}ngAfterViewInit(){this.getTuThoiTimes(),this.changeDetector.detectChanges()}getTuThoiTimes(){if("day"===this.calendarMode){this.tuThoiZone=[];const t=new Date((new Date).setHours(23,0,0)),a=new Date((new Date).setHours(0,59,59)),l=new Date((new Date).setHours(5,0,0)),r=new Date((new Date).setHours(6,59,59)),o=new Date((new Date).setHours(11,0,0)),i=new Date((new Date).setHours(12,59,59)),s=new Date((new Date).setHours(17,0,0)),u=new Date((new Date).setHours(18,59,59));this.tuThoiZone=[{startTime:t,position:this.getPosition(t),height:this.getPosition(a)-this.getPosition(t)},{startTime:l,position:this.getPosition(l),height:this.getPosition(r)-this.getPosition(l)},{startTime:o,position:this.getPosition(o),height:this.getPosition(i)-this.getPosition(o)},{startTime:s,position:this.getPosition(s),height:this.getPosition(u)-this.getPosition(s)}]}}onChangeSelectedCalendar(t,a){var l,r,o,i,s,u;"month"===this.calendarMode&&("next"===t&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setMonth(this.selectedDate.solar.getMonth()+1)),this.monthSelectValue=(null===(l=this.selectedDate.solar)||void 0===l?void 0:l.getMonth())+1<10?"0"+((null===(r=this.selectedDate.solar)||void 0===r?void 0:r.getMonth())+1):((null===(o=this.selectedDate.solar)||void 0===o?void 0:o.getMonth())+1).toString()),"before"===t&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setMonth(this.selectedDate.solar.getMonth()-1)),this.monthSelectValue=(null===(i=this.selectedDate.solar)||void 0===i?void 0:i.getMonth())+1<10?"0"+((null===(s=this.selectedDate.solar)||void 0===s?void 0:s.getMonth())+1):((null===(u=this.selectedDate.solar)||void 0===u?void 0:u.getMonth())+1).toString()),parseInt(a)&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setMonth(parseInt(a)-1)))),"day"===this.calendarMode&&(parseInt(a)&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setMonth(parseInt(a)-1))),"next"===t&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setDate(this.selectedDate.solar.getDate()+1))),"before"===t&&(this.selectedDate.solar=new Date(this.selectedDate.solar.setDate(this.selectedDate.solar.getDate()-1)))),"current"===t&&(this.selectedDate.solar=new Date),this.selectedMonth=this.calendarService.getSelectedMonthCalendar(this.selectedDate.solar.getMonth()+1,this.selectedDate.solar.getFullYear()),this.router.navigate([],{relativeTo:this.route,queryParams:{s:this.selectedDate.solar.toDateString()},queryParamsHandling:"merge"}),this.getCalendarEvent()}getCalendarEvent(){var t;let a=[],l=[],r=[];this.eventList.forEach(i=>i.event.forEach(s=>{var u,v,c;"yearly-monthly-daily"===s.date&&s.key.includes("tai-nha")&&"cung-tu-thoi"!==s.key&&a.push({mainEventKey:i.key,event:s}),"yearly-monthly-daily"!==s.date&&(null===(u=s.date)||void 0===u?void 0:u.includes("yearly-monthly-"))&&l.push({mainEventKey:i.key,event:s}),"yearly-monthly-daily"!==s.date&&!(null===(v=s.date)||void 0===v?void 0:v.includes("yearly-monthly-"))&&(null===(c=s.date)||void 0===c?void 0:c.includes("yearly-"))&&r.push({mainEventKey:i.key,event:s})}));let o=new Date;if((new Date).getHours()>22&&(o=new Date((new Date).setDate((new Date).getDate()+1))),"month"===this.calendarMode&&this.selectedMonth.forEach(i=>{i.solar.getDate()===o.getDate()&&i.solar.getMonth()===o.getMonth()&&i.solar.getFullYear()===o.getFullYear()&&(i.event=a);let s=l.filter(m=>parseInt(m.event.date.split("-")[2])===i.lunar.convertSolar2Lunar.lunarDay&&"lunar"===m.event.dateType);(null==s?void 0:s.length)>0&&(i.event=s);let u=l.filter(m=>parseInt(m.event.date.split("-")[2])===i.solar.getDate()&&"solar"===m.event.dateType);(null==u?void 0:u.length)>0&&(i.event=u);let v=r.filter(m=>parseInt(m.event.date.split("-")[1])===i.lunar.convertSolar2Lunar.lunarMonth&&parseInt(m.event.date.split("-")[2])===i.lunar.convertSolar2Lunar.lunarDay&&"lunar"===m.event.dateType);(null==v?void 0:v.length)>0&&(i.event=v);let c=r.filter(m=>parseInt(m.event.date.split("-")[1])===i.solar.getUTCMonth()+1&&parseInt(m.event.date.split("-")[2])===i.solar.getDate()&&"solar"===m.event.dateType);(null==c?void 0:c.length)>0&&(i.event=c)}),"day"===this.calendarMode){this.dateEvents=[],this.selectedDate.solar.getDate()===o.getDate()&&this.selectedDate.solar.getMonth()===o.getMonth()&&this.selectedDate.solar.getFullYear()===o.getFullYear()&&(this.selectedDate.event=a);let i=l.filter(c=>parseInt(c.event.date.split("-")[2])===this.selectedDate.lunar.convertSolar2Lunar.lunarDay&&"lunar"===c.event.dateType);(null==i?void 0:i.length)>0&&(this.selectedDate.event=i);let s=l.filter(c=>parseInt(c.event.date.split("-")[2])===this.selectedDate.solar.getDate()&&"solar"===c.event.dateType);(null==s?void 0:s.length)>0&&(this.selectedDate.event=s);let u=r.filter(c=>parseInt(c.event.date.split("-")[1])===this.selectedDate.lunar.convertSolar2Lunar.lunarMonth&&parseInt(c.event.date.split("-")[2])===this.selectedDate.lunar.convertSolar2Lunar.lunarDay&&"lunar"===c.event.dateType);(null==u?void 0:u.length)>0&&(this.selectedDate.event=u);let v=r.filter(c=>parseInt(c.event.date.split("-")[1])===this.selectedDate.solar.getUTCMonth()+1&&parseInt(c.event.date.split("-")[2])===this.selectedDate.solar.getDate()&&"solar"===c.event.dateType);(null==v?void 0:v.length)>0&&(this.selectedDate.event=v),null===(t=this.selectedDate.event)||void 0===t||t.forEach(c=>{let m=new Date;m.setHours(parseInt(c.event.time[0].split("-")[1].substring(0,2))),m.setMinutes(0);let se={timeZone:{key:c.event.time[0],start:m,end:c.event.time[0].split("-")[1].substring(2,2)},event:[c]},F=this.dateEvents.find(de=>de.timeZone.key===c.event.time[0]);F?F.event.push(c):this.dateEvents.push(se)})}console.log(this.dateEvents)}openEventSummaryDialog(t,a,l){this.shownDate={date:t,event:a},this.eventSummaryDialogRef=this.matDialog.open(l)}getTimes(t){return t.map(a=>this.commonService.commonTimes.find(l=>l.key===a))}getLocationTypes(t){return t.includes("all")&&(t=["all"]),t.map(a=>this.commonService.commonLocationTypes.find(l=>l.key===a))}onGetKinhFromSummaryEvent(){this.router.navigate(["/trang-chu/kinh"],{queryParams:{me:this.shownDate.event.mainEventKey,e:this.shownDate.event.event.key}})}getCurrentDate(t){var a,l,r,o,i,s,u,v,c;return(null===(a=null==t?void 0:t.solar)||void 0===a?void 0:a.getDate())===(null===(r=null===(l=this.currentDate)||void 0===l?void 0:l.solar)||void 0===r?void 0:r.getDate())&&(null===(o=null==t?void 0:t.solar)||void 0===o?void 0:o.getMonth())===(null===(s=null===(i=this.currentDate)||void 0===i?void 0:i.solar)||void 0===s?void 0:s.getMonth())&&(null===(u=null==t?void 0:t.solar)||void 0===u?void 0:u.getFullYear())===(null===(c=null===(v=this.currentDate)||void 0===v?void 0:v.solar)||void 0===c?void 0:c.getFullYear())}onChangeCalendarMode(t,a){if(this.calendarMode=t,"month"===this.calendarMode&&(this.selectedMonth=this.calendarService.getSelectedMonthCalendar(this.selectedDate.solar.getMonth()+1,this.selectedDate.solar.getFullYear()),this.calendarService.calendarViewMode=t),"day"===this.calendarMode){this.selectedDate=a,console.log(this.selectedDate);let l=new Date(this.selectedDate.solar);l.setDate(l.getDate()-1),l.setHours(23,0,0,0);let r=new Date(this.selectedDate.solar);r.setHours(22,59,59,999),this.dateRange=[];for(let o=l;o<=r;o.setMinutes(o.getMinutes()+1)){const i={year:o.getFullYear(),month:o.getMonth()+1,date:o.getDate(),hour:o.getHours(),munite:o.getMinutes()};this.dateRange.push(i)}this.calendarService.calendarViewMode=t,console.log(this.dateRange),setTimeout(()=>{this.getTuThoiTimes()},0)}this.router.navigate([],{relativeTo:this.route,queryParams:{m:t,s:this.selectedDate.solar.toDateString()},queryParamsHandling:"merge"})}swipe(t,a){const l=[t.changedTouches[0].clientX,t.changedTouches[0].clientY],r=(new Date).getTime();if("start"===a)this.swipeCoord=l,this.swipeTime=r;else if("end"===a){let i,o=[];this.swipeCoord&&(o=[l[0]-this.swipeCoord[0],l[1]-this.swipeCoord[1]]),this.swipeTime&&(i=r-this.swipeTime),i<1e3&&Math.abs(o[0])>30&&Math.abs(o[0])>Math.abs(3*o[1])&&this.onChangeSelectedCalendar(o[0]<0?"next":"before")}}getPosition(t){const a=`h${(null==t?void 0:t.getHours())<10?"0"+(null==t?void 0:t.getHours()):null==t?void 0:t.getHours()}m${(null==t?void 0:t.getMinutes())<10?"0"+(null==t?void 0:t.getMinutes()):null==t?void 0:t.getMinutes()}`,l=document.getElementById("dateRange"),r=null==l?void 0:l.getBoundingClientRect(),o=document.getElementById(a);return(null==o?void 0:o.getBoundingClientRect().top)-(null==r?void 0:r.top)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.o),e.Y36(q.v),e.Y36(J.P),e.Y36(p.uw),e.Y36(D.F0),e.Y36(D.gz),e.Y36(k.Yg),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lunar-calendar"]],decls:15,vars:8,consts:[[1,"wrapper-container","lunar-calendar-container"],[1,"lunar-calendar-toolbar","justify-content-between"],[1,"d-flex","align-items-center","w-100"],[1,"d-flex","align-items-center","justify-content-between",3,"ngClass"],[4,"ngIf"],["mat-stroked-button","",3,"matTooltip","click"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["class","selected-date",4,"ngIf"],["class","flex-1 h-100 wrapper-container selected-month-calendar",3,"touchstart","touchend",4,"ngIf"],["class","flex-1 h-100 wrapper-container selected-date-calendar",3,"touchstart","touchend",4,"ngIf"],["eventSummayDialog",""],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-icon-button","",3,"matTooltip","click"],[1,"selected-date"],[1,"flex-1","h-100","wrapper-container","selected-month-calendar",3,"touchstart","touchend"],[1,"days"],[1,"day","text-center"],[1,"flex-1","dates","h-100"],["class","date wrapper-container align-items-center",3,"ngStyle",4,"ngFor","ngForOf"],[1,"date","wrapper-container","align-items-center",3,"ngStyle"],["mat-flat-button","",3,"ngClass","click"],[1,"solar-date"],[1,"lunar-date"],[1,"flex-1","date-event","w-100"],["class","date-event-item","matRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["matRipple","",1,"date-event-item",3,"ngClass","click"],[1,"flex-1","h-100","wrapper-container","selected-date-calendar",3,"touchstart","touchend"],[1,"current-selected-date"],[1,"date-wraper"],[1,"date","text-center"],[1,"date-solar"],[1,"date-lunar"],["id","dateRange",1,"date-hours"],["class","munite d-flex",3,"id","matTooltip",4,"ngFor","ngForOf"],["id","now",1,"now-time",3,"ngStyle"],[1,"time-now"],[1,"clock"],["class","tu-thoi-zone",3,"ngStyle",4,"ngFor","ngForOf"],["class","selected-date-events",3,"ngStyle",4,"ngFor","ngForOf"],[1,"munite","d-flex",3,"id","matTooltip"],["class","start-time-hour",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"start-time-hour"],[1,"w-100"],[1,"tu-thoi-zone",3,"ngStyle"],[1,"selected-date-events",3,"ngStyle"],["class","selected-date-event",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"selected-date-event",3,"ngClass","click"],[1,"event-summary-dialog"],["mat-dialog-title",""],[1,"d-flex","details-item"],[4,"ngFor","ngForOf"],["mat-button","","mat-dialog-close",""],["mat-flat-button","",3,"color","mat-dialog-close","click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-toolbar",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.YNc(4,I,4,2,"div",4),e.TgZ(5,"button",5),e.NdJ("click",function(){return a.onChangeSelectedCalendar("current")}),e._uU(6," H\xf4m nay "),e.qZA(),e.qZA(),e.YNc(7,U,3,1,"button",6),e.YNc(8,H,3,1,"button",6),e.YNc(9,N,2,2,"span",7),e.qZA(),e.qZA(),e._UZ(10,"mat-divider"),e.YNc(11,z,18,1,"div",8),e.YNc(12,G,21,19,"div",9),e.qZA(),e.YNc(13,te,20,6,"ng-template",null,10,e.W1O)),2&t&&(e.xp6(3),e.Q6J("ngClass","mobile"===a.viewPortMode?"w-100":""),e.xp6(1),e.Q6J("ngIf","mobile"===a.viewPortMode),e.xp6(1),e.Q6J("matTooltip",(null==a.currentDate||null==a.currentDate.solar?null:a.currentDate.solar.getDate())+" th\xe1ng "+(null==a.currentDate||null==a.currentDate.solar?null:a.currentDate.solar.getMonth())+" n\u0103m "+(null==a.currentDate||null==a.currentDate.solar?null:a.currentDate.solar.getFullYear())),e.xp6(2),e.Q6J("ngIf","desktop"===a.viewPortMode),e.xp6(1),e.Q6J("ngIf","desktop"===a.viewPortMode),e.xp6(1),e.Q6J("ngIf","desktop"===a.viewPortMode),e.xp6(2),e.Q6J("ngIf","month"===a.calendarMode),e.xp6(1),e.Q6J("ngIf","day"===a.calendarMode))},directives:[T.Ye,g.mk,g.O5,C.KE,Z.gD,f.JJ,f.On,g.sg,y.ey,_.lW,M.gM,S.Hw,b.d,A.a8,g.PC,w.i$,w.Tg,y.wG,p.uh,p.H8,p.ZT],pipes:[g.JJ,g.Ov,g.uU],styles:[".lunar-calendar-container .lunar-calendar-toolbar{background-color:#fff}  .lunar-calendar-container .selected-month-calendar{background-color:#fff;overflow:hidden}  .lunar-calendar-container .selected-month-calendar .days{display:flex}  .lunar-calendar-container .selected-month-calendar .days .day{width:14.2857142857%;border-right:#dadce0 1px solid;border-bottom:#dadce0 1px solid;padding:.25rem}  .lunar-calendar-container .selected-month-calendar .dates{display:flex;flex-wrap:wrap}  .lunar-calendar-container .selected-month-calendar .dates .date{width:14.2857142857%;border-right:#dadce0 1px solid;border-bottom:#dadce0 1px solid;overflow:hidden}  .lunar-calendar-container .selected-month-calendar .dates .date button{padding:3px;line-height:1;min-width:0;width:36px;height:36px;border-radius:50px}@media only screen and (max-width: 600px){  .lunar-calendar-container .selected-month-calendar .dates .date button{width:32px;height:32px}}  .lunar-calendar-container .selected-month-calendar .dates .date .solar-date{font-size:14px}@media only screen and (max-width: 600px){  .lunar-calendar-container .selected-month-calendar .dates .date .solar-date{font-size:12px}}  .lunar-calendar-container .selected-month-calendar .dates .date .lunar-date{font-size:12px}@media only screen and (max-width: 600px){  .lunar-calendar-container .selected-month-calendar .dates .date .lunar-date{font-size:10px}}  .lunar-calendar-container .selected-month-calendar .dates .date .current-date{background-color:#6750a4;color:#fff}  .lunar-calendar-container .selected-month-calendar .dates .date .date-event{height:100%;overflow:auto}  .lunar-calendar-container .selected-month-calendar .dates .date .date-event .mat-list-base .mat-list-item,   .lunar-calendar-container .selected-month-calendar .dates .date .date-event .mat-list-base .mat-list-option{height:auto;padding:3px;border-radius:3px;margin-bottom:3px;font-size:12px}@media only screen and (max-width: 600px){  .lunar-calendar-container .selected-month-calendar .dates .date .date-event .mat-list-base .mat-list-item,   .lunar-calendar-container .selected-month-calendar .dates .date .date-event .mat-list-base .mat-list-option{font-size:10px}}  .lunar-calendar-container .selected-month-calendar mat-card{padding:0;border-radius:0}  .lunar-calendar-container .yearly-monthly-daily{background-color:#dadce0}  .lunar-calendar-container .yearly-monthly-special{background-color:#4086f4;color:#fff}  .lunar-calendar-container .yearly-special-special{background-color:#eb4132;color:#fff}  .event-summary-dialog .details-item{margin-bottom:.5rem}  .event-summary-dialog .details-item mat-icon{margin-right:1rem}",".lunar-calendar-container .selected-date-calendar{background-color:#fff;overflow:auto}  .lunar-calendar-container .selected-date-calendar .date-hours{position:relative;padding-top:.5rem;padding-left:3rem;z-index:1}  .lunar-calendar-container .selected-date-calendar .date-hours .munite{min-height:1px;height:1px;position:relative}  .lunar-calendar-container .selected-date-calendar .date-hours .munite .start-time{margin-left:1rem;margin-right:0;flex:0 50px;margin-top:-9px}  .lunar-calendar-container .selected-date-calendar .date-hours .munite .hour-details{height:-moz-fit-content;height:fit-content}  .lunar-calendar-container .selected-date-calendar .date-hours .munite .start-time-hour{position:absolute;font-size:12px;top:0;transform:translate(-2.5rem,-50%);background-color:#fff}  .lunar-calendar-container .selected-date-calendar .date-hours .now-time{position:absolute;left:0;width:100%;height:2px;transform-origin:left center;background-color:#eb4132}  .lunar-calendar-container .selected-date-calendar .date-hours .now-time .clock{position:absolute;top:0;left:0;transform:translateY(-50%);height:10px;width:10px;border-radius:10px;background-color:#eb4132}  .lunar-calendar-container .selected-date-calendar .date-hours .now-time .time-now{position:absolute;bottom:100%;left:10px;font-size:12px}  .lunar-calendar-container .selected-date-calendar .date-hours .tu-thoi-zone{position:absolute;left:0;width:100%;background-color:#dadce0;z-index:-1}  .lunar-calendar-container .selected-date-calendar .date-hours .selected-date-events{position:absolute;left:5rem;width:-moz-fit-content;width:fit-content}  .lunar-calendar-container .selected-date-calendar .date-hours .selected-date-events .selected-date-event{padding:3px;border-radius:3px;margin:0 .5rem .5rem;display:inline-block}  .lunar-calendar-container .selected-date-calendar .current-selected-date{position:sticky;top:0;z-index:2;background-color:#fff}  .lunar-calendar-container .selected-date-calendar .current-selected-date .date-wrapper{width:-moz-fit-content;width:fit-content}  .lunar-calendar-container .selected-date-calendar .current-selected-date .date{margin:.5rem;background-color:#6750a4;color:#fff;padding:.25rem;font-size:16px;width:45px;height:45px;border-radius:50%}  .lunar-calendar-container .selected-date-calendar .current-selected-date .date-lunar{font-size:12px}"]}),n})();class ae{}const le=[{path:"",children:[{path:"",component:ne}]}];let oe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[D.Bz.forChild(le)],D.Bz]}),n})();var ie=h(3954);let re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[g.uU],imports:[[g.ez,oe,T.g0,_.ot,S.Ps,C.lN,b.t,Z.LD,ie.N6,A.QW,_.ot,w.ie,y.si,M.AV,p.Is,f.u5]]}),n})()}}]);