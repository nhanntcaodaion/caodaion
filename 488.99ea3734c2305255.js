"use strict";(self.webpackChunkpwa=self.webpackChunkpwa||[]).push([[488],{4488:(Et,Q,s)=>{s.r(Q),s.d(Q,{EventModule:()=>ht});var v=s(9808),p=s(6696),t=s(5e3),N=s(6256),F=s(5113),U=s(2729),S=s(5604),Z=s(5899),T=s(3251),C=s(7423),x=s(5245),A=s(4834),_=s(1125),h=s(3954),u=s(9224),y=s(508);function O(i,r){1&i&&t._UZ(0,"mat-progress-bar",8)}function D(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return o.todayEvents.showFullList=!o.todayEvents.showFullList}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.todayEvents.showFullList?"\u1ea8n b\u1edbt":"Xem th\xeam"," ")}}const B=function(i){return{"position-absolute":i}},K=function(i,r,e,n,o,l){return{transform:i,color:r,background:e,width:n,zIndex:o,opacity:l}};function j(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",17),t.NdJ("click",function(){const o=t.CHM(e),l=o.$implicit,a=o.index;return t.oxw(2).viewEvent(l,a)}),t.TgZ(1,"div",18),t.TgZ(2,"div",19),t.TgZ(3,"button",20),t.TgZ(4,"mat-icon"),t._uU(5,"notifications"),t.qZA(),t.qZA(),t._uU(6," Nh\u1eadn th\xf4ng b\xe1o "),t.qZA(),t.TgZ(7,"div",21),t._uU(8),t.qZA(),t.TgZ(9,"div",22),t._uU(10),t.qZA(),t.TgZ(11,"div",23),t._uU(12),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=r.$implicit,n=r.index,o=t.oxw(2);t.Q6J("ngClass",t.VKq(6,B,!(null!=o.todayEvents&&o.todayEvents.showFullList)&&0!==n))("ngStyle",t.HTZ(8,K,"translateY("+(null!=o.todayEvents&&o.todayEvents.showFullList?"":.5*n+"rem")+")",e.color||"rgba(0, 0, 0, 0.87)",e.backgroundColor,null!=o.todayEvents&&o.todayEvents.showFullList?"":100-5*n+"%",null!=o.todayEvents&&o.todayEvents.showFullList?"":(null==o.todayEvents||null==o.todayEvents.event?null:o.todayEvents.event.length)-n,null!=o.todayEvents&&o.todayEvents.showFullList?"":100-5*n<100?"0."+(100-5*n-30):1)),t.xp6(8),t.Oqu(null==e?null:e.name),t.xp6(2),t.AsE("",null==e?null:e.startTime,"-",null==e?null:e.endTime,""),t.xp6(2),t.Oqu(null==e?null:e.location)}}const P=function(i){return{marginTop:i}};function z(i,r){if(1&i&&(t.TgZ(0,"div",9),t.TgZ(1,"div",10),t.TgZ(2,"h1",11),t._uU(3,"H\xd4M NAY"),t.qZA(),t.YNc(4,D,2,1,"button",12),t.qZA(),t.TgZ(5,"div",13),t.YNc(6,j,13,15,"div",14),t.qZA(),t._UZ(7,"mat-divider",15),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",(null==e.todayEvents||null==e.todayEvents.event?null:e.todayEvents.event.length)>1),t.xp6(2),t.Q6J("ngForOf",null==e.todayEvents?null:e.todayEvents.event),t.xp6(1),t.Q6J("ngStyle",t.VKq(3,P,.75*(null==e.todayEvents||null==e.todayEvents.event?null:e.todayEvents.event.length)+"rem"))}}function X(i,r){if(1&i&&(t.TgZ(0,"mat-grid-tile"),t.TgZ(1,"mat-card",29),t.TgZ(2,"mat-card-header"),t.TgZ(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"mat-card-content"),t.TgZ(8,"p"),t._uU(9),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("routerLink",null==e?null:e.key),t.xp6(3),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(null==e?null:e.key),t.xp6(3),t.Oqu(null==e?null:e.description)}}function V(i,r){1&i&&(t.TgZ(0,"mat-grid-tile"),t.TgZ(1,"mat-card",29),t.TgZ(2,"mat-card-header"),t.TgZ(3,"mat-card-title"),t._uU(4,"+ Th\xeam m\u1edbi"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6,"Th\xeam m\u1edbi s\u1ef1 ki\u1ec7n"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(1),t.Q6J("routerLink","them-moi"))}function W(i,r){if(1&i&&(t.TgZ(0,"mat-tab",3,4),t.TgZ(2,"mat-accordion",24),t.TgZ(3,"mat-expansion-panel",25),t.TgZ(4,"mat-expansion-panel-header"),t.TgZ(5,"mat-panel-title"),t._uU(6," S\u1ef1 ki\u1ec7n"),t.qZA(),t.qZA(),t.TgZ(7,"mat-grid-list",26),t.YNc(8,X,10,4,"mat-grid-tile",27),t.YNc(9,V,7,1,"mat-grid-tile",28),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.Q6J("label","C\xc0I \u0110\u1eb6T"),t.xp6(3),t.Q6J("expanded",!0),t.xp6(4),t.Q6J("cols",e.cols),t.xp6(1),t.Q6J("ngForOf",e.eventList),t.xp6(1),t.Q6J("ngIf",e.contentEditable)}}let R=(()=>{class i{constructor(e,n,o,l,a,c){this.router=e,this.route=n,this.authService=o,this.breakpointObserver=l,this.eventService=a,this.commonService=c,this.selectedIndex=0,this.isLoading=!1,this.cols=1,this.eventList=this.eventService.eventList,this.happeningEvents={event:[],showFullList:!1},this.upcomingEvents={event:[],showFullList:!1},this.todayEvents={event:[],showFullList:!1},this.time=this.commonService.time}ngOnInit(){this.route.queryParams.subscribe(e=>{this.selectedIndex=e.t?parseInt(e.t):this.authService.contentEditable?3:0}),this.breakpointObserver.observe(["(max-width: 600px)"]).subscribe(e=>{this.cols=e.matches?2:6}),this.contentEditable=this.authService.contentEditable,this.getEvents()}selectedTabChange(e){this.router.navigate([],{relativeTo:this.route,queryParams:{t:e.index},queryParamsHandling:"merge"})}getEvents(){console.log(this.time),this.getHappeningTuThoiEvents(),this.getTodayTuThoiEvents()}getHappeningTuThoiEvents(){var e,n,o,l,a,c,d,m,E;switch(this.happeningEvents.event=[],null===(o=null===(n=null===(e=this.time)||void 0===e?void 0:e.commonTime)||void 0===n?void 0:n.current)||void 0===o?void 0:o.key){case"ty-2301":case"meo-0507":case"ngo-1113":case"dau-1719":this.happeningEvents.event=[null===(a=null===(l=this.eventList.find(g=>"cung-tu-thoi"===g.key))||void 0===l?void 0:l.event)||void 0===a?void 0:a.find(g=>{var M;return 1==(null===(M=null==g?void 0:g.time)||void 0===M?void 0:M.length)&&(null==g?void 0:g.time.find(ft=>{var J,w,L;return ft===(null===(L=null===(w=null===(J=this.time)||void 0===J?void 0:J.commonTime)||void 0===w?void 0:w.current)||void 0===L?void 0:L.key)}))})],this.happeningEvents.event[0].startTime=`${null===(d=null===(c=this.happeningEvents.event[0])||void 0===c?void 0:c.time[0].split("-")[1])||void 0===d?void 0:d.slice(0,2)}:00`,this.happeningEvents.event[0].endTime=`${null===(E=null===(m=this.happeningEvents.event[0])||void 0===m?void 0:m.time[0].split("-")[1])||void 0===E?void 0:E.slice(2,4)}:00`}}getTodayTuThoiEvents(){var e,n,o,l;this.todayEvents.event=[],this.todayEvents.event=null===(n=null===(e=this.eventList.find(a=>"cung-tu-thoi"===a.key))||void 0===e?void 0:e.event)||void 0===n?void 0:n.filter(a=>"cung-tu-thoi"!==a.key),this.todayEvents.event.forEach(a=>{var c,d;switch(a.startTime=`${null===(c=null==a?void 0:a.time[0].split("-")[1])||void 0===c?void 0:c.slice(0,2)}:00`,a.endTime=`${null===(d=null==a?void 0:a.time[0].split("-")[1])||void 0===d?void 0:d.slice(2,4)}:00`,a.location="all"===(null==a?void 0:a.locationType[0])?"\u0110i\u1ec7n th\u1edd \u0110\u1ee9c Ch\xed T\xf4n":"",null==a?void 0:a.time[0]){case"ty-2301":a.color="#ffffff",a.backgroundColor="linear-gradient(#221f23, #19386d)";break;case"meo-0507":a.backgroundColor="linear-gradient(#f1a2c4, #f9f2ec)";break;case"ngo-1113":a.backgroundColor="linear-gradient(#daf4d7, #07b4ff)";break;case"dau-1719":a.color="#ffffff",a.backgroundColor="linear-gradient(#b87059, #7a019e)";break;default:a.backgroundColor="black",a.color="white"}}),this.todayEvents.event=null===(l=null===(o=this.todayEvents)||void 0===o?void 0:o.event)||void 0===l?void 0:l.filter(a=>new Date(`${(new Date).getFullYear()}-${(new Date).getMonth()+1}-${(new Date).getDate()} ${a.endTime}:00`)>new Date)}viewEvent(e,n){!this.todayEvents.showFullList&&(!e&&!n||e&&0!==n)?this.todayEvents.showFullList=!this.todayEvents.showFullList:console.log(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(N.e),t.Y36(F.Yg),t.Y36(U.P),t.Y36(S.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-event-list"]],decls:8,vars:5,consts:[[1,"event-list-container"],["mode","indeterminate",4,"ngIf"],[3,"selectedIndex","selectedTabChange"],[3,"label"],["tabGroup",""],[1,"main-event-list"],["class","event-group happenning-event",4,"ngIf"],[3,"label",4,"ngIf"],["mode","indeterminate"],[1,"event-group","happenning-event"],[1,"event-group-header","d-flex","justify-content-between","align-items-center"],[1,"event-group-title"],["mat-button","","class","event-group-action",3,"click",4,"ngIf"],[1,"event-group-list","d-flex","flex-column","align-items-center"],["class","event-card d-flex",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[3,"ngStyle"],["mat-button","",1,"event-group-action",3,"click"],[1,"event-card","d-flex",3,"ngClass","ngStyle","click"],[1,"event-information"],[1,"notification-subscribe"],["mat-icon-button","","aria-label","B\u1eadt/T\u1eaft th\xf4ng b\xe1o",1,"notification-subscribe-btn"],[1,"event-name"],[1,"event-time"],[1,"event-location"],["multi",""],[3,"expanded"],["rowHeight","1:1",3,"cols"],[4,"ngFor","ngForOf"],[4,"ngIf"],["matRipple","",1,"h-100","w-100",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,O,1,0,"mat-progress-bar",1),t.TgZ(2,"mat-tab-group",2),t.NdJ("selectedTabChange",function(l){return n.selectedTabChange(l)}),t.TgZ(3,"mat-tab",3,4),t.TgZ(5,"div",5),t.YNc(6,z,8,5,"div",6),t.qZA(),t.qZA(),t.YNc(7,W,10,5,"mat-tab",7),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("selectedIndex",n.selectedIndex),t.xp6(1),t.Q6J("label","S\u1ef0 KI\u1ec6N"),t.xp6(3),t.Q6J("ngIf",(null==n.todayEvents||null==n.todayEvents.event?null:n.todayEvents.event.length)>0),t.xp6(1),t.Q6J("ngIf",n.contentEditable))},directives:[v.O5,Z.pW,T.SP,T.uX,C.lW,v.sg,v.mk,v.PC,x.Hw,A.d,_.pp,_.ib,_.yz,_.yK,h.Il,h.DX,u.a8,y.wG,p.rH,u.dk,u.n5,u.$j,u.dn],styles:[".event-list-container .mat-grid-tile-content{padding:.5rem!important}  .event-list-container .mat-card{cursor:pointer}  .event-list-container .mat-tab-body-content{padding:.5rem}  .event-list-container .mat-tab-body-wrapper{flex:1}  .event-list-container .mat-tab-group{flex:1;height:100%;overflow:hidden;background-color:#fff}  .event-list-container .main-event-list .event-group{padding-bottom:2rem}  .event-list-container .main-event-list .event-group .event-group-header{margin:1rem 0;color:#000000de}  .event-list-container .main-event-list .event-group .event-group-header .event-group-action{text-decoration:underline}  .event-list-container .main-event-list .event-group .event-group-list{position:relative}  .event-list-container .main-event-list .event-group .event-group-list .event-card{border-radius:1rem;padding:1rem;color:#fff;margin-bottom:1rem;width:100%;position:relative;transition:all 1s;cursor:pointer}  .event-list-container .main-event-list .event-group .event-group-list .event-card.position-absolute{position:absolute;top:0}  .event-list-container .main-event-list .event-group .event-group-list .event-card .notification-subscribe-btn{background:rgba(255,255,255,.5);margin-bottom:.5rem}  .event-list-container .main-event-list .event-group .event-group-list .event-card .event-name{margin-bottom:.5rem}  .event-list-container .main-event-list .event-group .event-group-list .event-card .event-time{font-size:30px;font-weight:700;margin-bottom:.5rem}  .event-list-container .main-event-list .event-group .event-group-list .event-card .event-location{font-weight:300}"]}),i})();class H{}var G=s(7261),tt=s(7671),et=s(5484),b=s(7322),I=s(7531),f=s(3075),q=s(9814),Y=s(4107),k=s(4623);function nt(i,r){1&i&&t._UZ(0,"mat-progress-bar",3)}function it(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onSave()}),t._uU(1," L\u01b0u "),t.qZA()}2&i&&t.Q6J("color","primary")}function ot(i,r){if(1&i&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e.key),t.xp6(1),t.hij(" ",e.name," ")}}function at(i,r){if(1&i&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e.key),t.xp6(1),t.hij(" ",e.name," ")}}function lt(i,r){if(1&i&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e.key),t.xp6(1),t.hij(" ",e.name," ")}}function rt(i,r){if(1&i&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e.key),t.xp6(1),t.hij(" ",e.name," ")}}function st(i,r){if(1&i&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e.key),t.xp6(1),t.hij(" ",e.name," ")}}function ct(i,r){if(1&i&&(t.TgZ(0,"mat-list-option",24),t._uU(1),t._UZ(2,"mat-divider"),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e.key),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function dt(i,r){if(1&i&&(t.TgZ(0,"mat-list-option",24),t._uU(1),t._UZ(2,"mat-divider"),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",null==e?null:e.key),t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function ut(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"mat-card",20),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-card-title"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"mat-card-content"),t.TgZ(5,"div",11),t.TgZ(6,"div",12),t.TgZ(7,"mat-form-field",13),t.TgZ(8,"mat-label"),t._uU(9,"T\xean s\u1ef1 ki\u1ec7n"),t.qZA(),t.TgZ(10,"input",21),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.name=o})("input",function(){const l=t.CHM(e).$implicit;return t.oxw(2).onChangeEventName(l)}),t.qZA(),t.qZA(),t.TgZ(11,"div",22),t.TgZ(12,"mat-radio-group",23),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.dateType=o}),t.TgZ(13,"mat-radio-button",24),t.TgZ(14,"mat-label"),t._uU(15,"\xc2m l\u1ecbch"),t.qZA(),t.qZA(),t.TgZ(16,"mat-radio-button",24),t.TgZ(17,"mat-label"),t._uU(18,"D\u01b0\u01a1ng l\u1ecbch"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"mat-form-field",13),t.TgZ(20,"mat-label"),t._uU(21,"N\u0103m"),t.qZA(),t.TgZ(22,"input",25),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.year=o}),t.qZA(),t.TgZ(23,"mat-select",26),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.year=o}),t.YNc(24,ot,2,2,"mat-option",27),t.qZA(),t.qZA(),t.TgZ(25,"mat-form-field",13),t.TgZ(26,"mat-label"),t._uU(27,"Th\xe1ng"),t.qZA(),t.TgZ(28,"mat-select",28),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.month=o}),t.YNc(29,at,2,2,"mat-option",27),t.qZA(),t.qZA(),t.TgZ(30,"mat-form-field",13),t.TgZ(31,"mat-label"),t._uU(32,"Ng\xe0y"),t.qZA(),t.TgZ(33,"mat-select",28),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.selectedDate=o}),t.YNc(34,lt,2,2,"mat-option",27),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"mat-form-field",13),t.TgZ(36,"mat-label"),t._uU(37,"Th\u1eddi gian"),t.qZA(),t.TgZ(38,"mat-select",29),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.time=o})("selectionChange",function(){const l=t.CHM(e).$implicit;return t.oxw(2).onChangeCommonTime(l)}),t.YNc(39,rt,2,2,"mat-option",27),t.qZA(),t.qZA(),t.TgZ(40,"mat-form-field",13),t.TgZ(41,"mat-label"),t._uU(42,"\u0110\u1ecba \u0111i\u1ec3m"),t.qZA(),t.TgZ(43,"mat-select",29),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.locationType=o})("selectionChange",function(){const l=t.CHM(e).$implicit;return t.oxw(2).onChangeCommonLocationTypeValue(l)}),t.YNc(44,st,2,2,"mat-option",27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(45,"mat-divider"),t.TgZ(46,"div",11),t.TgZ(47,"mat-grid-list",30),t.TgZ(48,"mat-grid-tile",31),t.TgZ(49,"mat-card",32),t.TgZ(50,"mat-card-header"),t.TgZ(51,"mat-card-title"),t._uU(52,"NGU\u1ed2N"),t.qZA(),t.qZA(),t.TgZ(53,"mat-card-content",33),t._UZ(54,"mat-divider"),t.TgZ(55,"mat-selection-list",34,35),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.kinh=o})("selectionChange",function(){const l=t.CHM(e).$implicit,a=t.MAs(56),c=t.MAs(66);return t.oxw(2).onChangeSelectedKinhOption("stock",l,a,c)}),t.YNc(57,ct,3,2,"mat-list-option",27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"mat-grid-tile",31),t.TgZ(59,"mat-card",32),t.TgZ(60,"mat-card-header"),t.TgZ(61,"mat-card-title"),t._uU(62),t.qZA(),t.qZA(),t.TgZ(63,"mat-card-content",33),t._UZ(64,"mat-divider"),t.TgZ(65,"mat-selection-list",34,36),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.kinh=o})("selectionChange",function(){const l=t.CHM(e).$implicit,a=t.MAs(56),c=t.MAs(66);return t.oxw(2).onChangeSelectedKinhOption("filter",l,a,c)}),t.YNc(67,dt,3,2,"mat-list-option",27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"mat-card-actions",37),t.TgZ(69,"button",38),t.TgZ(70,"mat-icon"),t._uU(71,"delete"),t.qZA(),t._uU(72," X\xf3a "),t.qZA(),t.TgZ(73,"button",19),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).onAddNewEvent(l)}),t.TgZ(74,"mat-icon"),t._uU(75,"add"),t.qZA(),t._uU(76," TH\xcaM S\u1ef0 KI\u1ec6N M\u1edaI "),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(3),t.AsE("S\u1ef1 ki\u1ec7n ",e.name," (",e.key,")"),t.xp6(4),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.dateType),t.xp6(1),t.Q6J("value","lunar"),t.xp6(3),t.Q6J("value","solar"),t.xp6(3),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",e.year)("autocomplete","off"),t.xp6(1),t.Q6J("multiple",!0)("ngModel",e.year),t.xp6(1),t.Q6J("ngForOf",null==n.commonDates?null:n.commonDates.year),t.xp6(1),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",e.month),t.xp6(1),t.Q6J("ngForOf",null==n.commonDates?null:n.commonDates.month),t.xp6(1),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",e.selectedDate),t.xp6(1),t.Q6J("ngForOf",null==n.commonDates?null:n.commonDates.date),t.xp6(1),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",e.time)("multiple",!0),t.xp6(1),t.Q6J("ngForOf",n.commonTimes),t.xp6(1),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",e.locationType)("multiple",!0),t.xp6(1),t.Q6J("ngForOf",n.commonLocationTypes),t.xp6(3),t.Q6J("cols",2)("rowHeight","2:1"),t.xp6(8),t.Q6J("ngModel",e.kinh),t.xp6(2),t.Q6J("ngForOf",n.kinhList),t.xp6(5),t.hij("Danh s\xe1ch kinh: ",null==e?null:e.name,""),t.xp6(3),t.Q6J("ngModel",e.kinh),t.xp6(2),t.Q6J("ngForOf",e.kinhList),t.xp6(1),t.Q6J("align","end"),t.xp6(1),t.Q6J("color","warn"),t.xp6(4),t.Q6J("color","primary")}}function mt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"div",5),t.TgZ(2,"div",6),t.TgZ(3,"div",7),t.TgZ(4,"div"),t.TgZ(5,"h1"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div"),t.YNc(8,it,2,1,"button",8),t.TgZ(9,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().onBack()}),t._uU(10,"Tho\xe1t"),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"mat-divider"),t.qZA(),t.TgZ(12,"div",10),t.TgZ(13,"div",11),t.TgZ(14,"div",12),t.TgZ(15,"mat-form-field",13),t.TgZ(16,"mat-label"),t._uU(17,"T\xean s\u1ef1 ki\u1ec7n"),t.qZA(),t.TgZ(18,"input",14),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().currentEvent.name=o})("change",function(){return t.CHM(e),t.oxw().onChangeName()}),t.qZA(),t.qZA(),t.TgZ(19,"mat-form-field",13),t.TgZ(20,"mat-label"),t._uU(21,"Key/Slug"),t.qZA(),t.TgZ(22,"input",15),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().currentEvent.key=o}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",11),t.TgZ(24,"mat-form-field",13),t.TgZ(25,"mat-label"),t._uU(26,"M\xf4 t\u1ea3"),t.qZA(),t.TgZ(27,"textarea",16),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().currentEvent.description=o}),t.qZA(),t.qZA(),t.qZA(),t._UZ(28,"mat-divider"),t.TgZ(29,"div",17),t.YNc(30,ut,77,37,"mat-card",18),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(6),t.hij("S\u1ef1 ki\u1ec7n - ",null==e.currentEvent?null:e.currentEvent.name,""),t.xp6(2),t.Q6J("ngIf",e.contentEditable),t.xp6(7),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",e.currentEvent.name),t.xp6(1),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",e.currentEvent.key)("disabled","them-moi"!==e.eventKey),t.xp6(2),t.Q6J("appearance","fill"),t.xp6(3),t.Q6J("ngModel",e.currentEvent.description),t.xp6(3),t.Q6J("ngForOf",e.currentEvent.event)}}let vt=(()=>{class i{constructor(e,n,o,l,a,c,d,m,E){this.route=e,this._snackBar=n,this.breakpointObserver=o,this.authService=l,this.location=a,this.eventService=c,this.kinhService=d,this.caodaionEditorService=m,this.commonService=E,this.currentEvent=new H,this.contentEditable=!1,this.isLoading=!1,this.isShowBackButton=!1,this.horizontalPosition="center",this.verticalPosition="bottom",this.eventList=this.eventService.eventList,this.kinhList=this.kinhService.kinhList,this.commonTimes=this.commonService.commonTimes,this.commonDates=this.commonService.commonDates,this.commonLocationTypes=this.commonService.commonLocationTypes}ngOnInit(){this.route.params.subscribe(e=>{this.eventKey=e.eventKey}),this.breakpointObserver.observe(["(max-width: 600px)"]).subscribe(e=>{e.matches?(this.contentEditable=!1,this.isShowBackButton=!1,localStorage.setItem("currentLayout",JSON.stringify({isHideToolbar:!0,isHideBottomNavBar:!0}))):(this.contentEditable=this.authService.contentEditable,this.isShowBackButton=!0,localStorage.setItem("currentLayout",JSON.stringify({isHideToolbar:!1,isHideBottomNavBar:!1})))}),this.getEvent()}getEvent(){let e=this.eventList.find(n=>n.key===this.eventKey);if(this.currentEvent=e||new H,this.currentEvent.event&&0!==this.currentEvent.event.length)this.currentEvent.event.forEach(n=>{n.selectedDate=n.date.split("-")[2],n.month=n.date.split("-")[1],n.year=[n.date.split("-")[0]],n.kinhList=[],n.kinh.forEach(o=>{var l;let a=null===(l=this.kinhList)||void 0===l?void 0:l.find(c=>c.key===o);n.kinhList.push(a)})});else{this.currentEvent.event=[];const n=new $;this.currentEvent.event.push(n)}}onChangeSelectedKinhOption(e,n,o,l){n.kinhList=[],"stock"===e&&o.selectedOptions.selected&&o.selectedOptions.selected.forEach(a=>{var c;let d=null===(c=this.kinhList)||void 0===c?void 0:c.find(m=>m.key===a.value);n.kinhList.push(d)}),"filter"===e&&l.selectedOptions.selected&&l.selectedOptions.selected.forEach(a=>{var c;let d=null===(c=this.kinhList)||void 0===c?void 0:c.find(m=>m.key===a.value);n.kinhList.push(d)}),n.kinh=n.kinhList.map(a=>a.key)}onChangeCommonTime(e){e.time=this.commonService.getCommonTimeValue(e.time)}onChangeCommonLocationTypeValue(e){e.locationType=this.commonService.getCommonLocationTypeValue(e.locationType)}onAddNewEvent(e){const n=new $;e?e.name&&e.time&&e.locationType&&e.kinh&&0!==e.kinh.length?this.currentEvent.event.push(n):console.log(e):this.currentEvent.event.push(n)}onChangeName(){this.currentEvent.key=this.currentEvent.name?this.getSlug(this.currentEvent.name):""}onChangeEventName(e){e.key=e.name?this.getSlug(e.name):""}getSlug(e){return this.caodaionEditorService.generatedSlug(e)}onSave(){let e=[];"them-moi"===this.eventKey&&this.eventList.push(this.currentEvent),this.eventList.forEach(n=>{let o=[];o=n.event.map(l=>({key:l.key,name:l.name,dateType:l.dateType,date:l.year&&l.month&&l.selectedDate?`${l.year}-${l.month}-${l.selectedDate}`:l.date,time:l.time,locationType:l.locationType,kinh:l.kinh})),e.push({name:n.name,description:n.description,key:n.key,event:o})}),console.log({data:e})}onBack(){this.location.back()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.gz),t.Y36(G.ux),t.Y36(F.Yg),t.Y36(N.e),t.Y36(v.Ye),t.Y36(U.P),t.Y36(tt.c),t.Y36(et.TB),t.Y36(S.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-event-content"]],decls:3,vars:2,consts:[[1,"wrapper-container","event-content-container"],["mode","indeterminate",4,"ngIf"],["class","wrapper-container event-container-wrapper",4,"ngIf"],["mode","indeterminate"],[1,"wrapper-container","event-container-wrapper"],[1,"flex-1","wrapper-container","event-container"],[1,"top-pannel"],[1,"top-pannel-content","d-flex","justify-content-between"],["mat-flat-button","",3,"color","click",4,"ngIf"],["mat-stroked-button","",3,"click"],[1,"flex-1","event-content-form"],[1,"form-group"],[1,"d-flex"],[1,"w-100",3,"appearance"],["type","text","matInput","",3,"ngModel","ngModelChange","change"],["type","text","matInput","",3,"ngModel","disabled","ngModelChange"],["rows","3","matInput","",3,"ngModel","ngModelChange"],[1,"form-group","event-form-group"],["class","event-details",4,"ngFor","ngForOf"],["mat-flat-button","",3,"color","click"],[1,"event-details"],["type","text","matInput","","required","",3,"ngModel","ngModelChange","input"],[1,"w-100","d-flex"],[3,"ngModel","ngModelChange"],[3,"value"],["matInput","",3,"ngModel","autocomplete","ngModelChange"],["required","",3,"multiple","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["required","",3,"ngModel","ngModelChange"],["required","",3,"ngModel","multiple","ngModelChange","selectionChange"],[3,"cols","rowHeight"],[1,"kinh-list-wrapper"],[1,"w-100","h-100","wrapper-container"],[1,"flex-1","kinh-list","w-100","h-100"],[3,"ngModel","ngModelChange","selectionChange"],["stock",""],["filter",""],[3,"align"],["mat-button","",3,"color"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,nt,1,0,"mat-progress-bar",1),t.YNc(2,mt,31,10,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",n.currentEvent))},directives:[v.O5,Z.pW,C.lW,A.d,b.KE,b.hX,I.Nt,f.Fj,f.JJ,f.On,v.sg,u.a8,u.dk,u.n5,u.dn,f.Q7,q.VQ,q.U0,Y.gD,y.ey,h.Il,h.DX,k.Ub,k.vS,u.hq,x.Hw],styles:[".event-content-container{background-color:#fff}  .event-content-container .top-pannel-content button{margin-left:1rem}  .event-content-container .form-group{padding:1rem}  .event-content-container .form-group mat-card{margin-bottom:1rem}  .event-content-container .form-group mat-card .kinh-list{overflow:auto}  .event-content-container .kinh-list-wrapper .mat-grid-tile-content{padding:.5rem}  .event-content-container .event-content-form{overflow:auto}"]}),i})();class ${constructor(){this.dateType="lunar"}}const gt=[{path:"",children:[{path:"",component:R},{path:":eventKey",component:vt}]}];let pt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.Bz.forChild(gt)],p.Bz]}),i})();var _t=s(4546);let ht=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[v.ez,pt,T.Nh,h.N6,u.QW,A.t,Z.Cv,_t.O,_.To,C.ot,y.si,x.Ps,f.u5,b.lN,I.c,k.ie,Y.LD,q.Fk]]}),i})()}}]);